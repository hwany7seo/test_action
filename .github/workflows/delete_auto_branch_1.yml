name: delete auto branch
on:
  push:
    branches: [ "main" ]

jobs:
  delete:
    runs-on: ubuntu-latest
    env:
      PARENT_REPOSITORY: 'hwany7seo/test_action'
      CHECKOUT_BRANCH: 'main'
      PR_AGAINST_BRANCH: 'main'
      OWNER: 'hwany7seo'
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - name: delete auto generated branch
        shell: bash
        run: |
          RET=$(echo $(git branch -r | grep 'autogensubmodule/'))
          if [ -n $RET ]; then
            git branch -r | grep 'autogensubmodule/'| cut -c 10- | xargs git push origin --delete
          fi
      
